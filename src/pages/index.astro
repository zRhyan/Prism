---
// src/pages/index.astro

import "../styles/global.css";
---

<!DOCTYPE HTML>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<title>Prism - Daily Tracker</title>

		<!-- Chart.js CDN -->
		<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

	</head>

	<body>
		<header>
			<div class="logo"></div>
			<div>
				<div style="font-weight:700">Prism</div>
				<div style="
				font-size:12px; 
				color:var(--muted)">reveal the hidden patterns of your day</div>
			</div>
		</header>

		<main>
			<!-- PARAMETERS -->
			<section class="card">
				<h2>Parameters</h2>
				<div class="muted" style="margin-bottom: 8px;">Add parameters you want to track.</div>
				<ul id="paramsList"></ul>

				<form id="addParamForm" style="margin-top: 10px;">
					<input
						id="paramName"
						type="text"
						placeholder="New parameter (e.g., Mood)"
						required
					/>
			
					<button type="submit" style="margin-top: 6px;">Add Parameter</button>
				</form>
			</section>

			<!-- ENTRIES -->
			<section class="card">
				<h2>Record entry - <span id="currentDate" class="muted"></span></h2>

				<form id="entryForm">
					<label class="muted">Parameter</label>
					<select id="entryParam"></select>

					<div class="period">
						<label>
							<input
								type="radio"
								name="period"
								value="morning"
								checked
							/>
							Morning
						</label>
						<label>
							<input 
								type="radio" 
								name="period" 
								value="afternoon" 
							/>
							Afternoon
						</label>
					</div>

					<label class="muted">Rating: <span id="ratingValue">7</span></label>
					<input
						id="rating"
						type="range"
						min="0"
						max="10"
						step="0.1"
						value="7"
					/>

					<textarea id="comment" placeholder="Optional comment..."></textarea>

					<div style="
						display: flex;
						gap: 10px;
						justify-content: space-between;
						align-items: center;"
					>
						<button type="submit" style="margin-top: 10px;">Add Entry</button>
						<div class="muted" style="font-size: 13px;">Quick flow - 2 clicks & done</div>
					</div>

					<div id="entryFields"></div>
				</form>

				<h3 style="margin-top: 12px;">Today's entries</h3>
				<ul id="entriesList" style="margin-top: 8px;"></ul>
			</section>
		</main>

		<!-- CHARTS -->
		<section class="card charts">
			<h2>Weekly chart</h2>
			<div class="muted" style="margin-bottom: 8px;">Select a parameter to view the last 7 days.</div>
			<select id="chartParam"></select>
			<canvas id="weeklyChart" aria-label="Weekly chart"></canvas>
		</section>

		<script type="module" src="/src/scripts/main.js"></script>
	</body>
</html>
